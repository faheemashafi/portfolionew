var __assign,__spreadArray,SvCtrlV2;(function(n){n.ColListName="ColLst";n.SavableEntityCN="isv";n.SavedCN="saved";n.SaveCtrlContainerCN="isvctrl";n.FlyoutErrorCN="err";n.InProgressCN="ing";n.GetErrCN="b_geterr";n.FocusCN="isvfoc";n.HoverCN="b_isvhvr";n.SaveCtrlHoveredCN="b_schvr";n.CurrentElementCN="b_isvcur";n.PersBtnHoveredCN="b_scpers";n.NarrowImageCN="b_nrrwimg";n.NarrowImageRightCN="b_nrrwimgr";n.NarrowImageBottomCN="b_nrrwimgb";n.HasFlyoutCN="b_flyt";n.FlyoutActiveCN="b_scactive";n.SublabelActiveCN="b_scslbl";n.ErrDispCN="b_scdisp";n.DeactivateCN="scdactve";n.ErrStateVisibleCN="errvsbl";n.ErrStateInvisibleCN="errinvsbl";n.RemovableCN=[n.SavedCN,n.FocusCN,n.HoverCN,n.InProgressCN,n.FlyoutErrorCN,n.SaveCtrlHoveredCN];n.CollectionAttr="collection";n.CollectionItemIdAttr=n.CollectionAttr+"ItemId";n.IsSuccessAttr="isSuccess";n.ParentElementAttr="parentElement";n.UndefinedString="undefined";n.RelatedTargetAttr="relatedTarget";n.CurrentTargetAttr="currentTarget";n.TargetAttr="target";n.PixelUnit="px";n.SavesGenericItemDataAttr="data-saves-generic-item";n.ScrollBindDataAttr="data-scrbind";n.ClassListAttr="classList";n.CollectionIdDataAttribute="data-svcid";n.KCTDataAttr="data-svkct";n.SavedDataAttr="data-svd";n.SaveErrorMapAttr="data-save-error-map";n.ComponentIdDataAttr="data-svcptid";n.ariaLabelAttr="aria-label";n.AddCollToListEN="addCollToList";n.RemoveCollFromList="removeCollFromList";n.PartnerRegisterEN="onPartnerRegister";n.DeregisterPersBtnEN="onDeregisterPersBtn";n.UpdateHoverBoxEN="onUpdateHoverBox";n.scEngagementEN="onSCEngagement";n.FocusInEN=["mouseenter","focusin"];n.FocusOutEN=["mouseleave","focusout"];n.CollListExpandEN="onCollListExpand";n.VisualStateChangedEN="onVisualStateChanged";n.CollectionsGottenEN="onCollectionsGotten";n.HostSavesControlClickedEN="onHostSavesControlClicked";n.PersButtonInteractEN="onPersButtonInteract";n.SaveAddEN="onSaveAdd";n.SaveDelEN="onSaveDel";n.SaveControlErrorEN="onSaveControlError";n.ControlAppendedEN="onControlAppended";n.CurrentCollIdSetEN="onCurrentCollIdSet";n.HoverElementSetEN="onHoverElementSet";n.SaveButtonClickEN="onSaveButtonClick";n.SaveButtonFocusEN="onSaveButtonFocus";n.ChevronToggleCollListEN="onBtnToggleCollList";n.FavAddEN="onFavAdd";n.FavDeleteEN="onFavDel";n.CollBCLoadedEN="CollectionsBCLoaded";n.CurrentElementSetEN="onCurrentElementSet";n.UpdateSaveStateEN="updateSaveState";n.LoadingSuggestedCollection="loadingSuggestedCollection";n.CurrentCollIdUnsetEN="onCurrentCollIdUnset";n.ChangeCollThumbnail="onChangeCollThumbnail";n.TypeToAttributeMap={webdoc:"url",recipe:"sid",video:"mid",image:"cid",product:"cid"};n.ScrollEvent="scroll";n.ResizeEvent="resize";n.CustomCollDummyId="CustomCollId";n.IcnsBGColorCss="--icn-bg-color";n.IcnLblTxtClrCss="--svlbl-txt-color";n.SavedIcnCss="--svicn-bg-img";n.UnsavedIcnCss="--unsvicn-bg-img";n.SavedPromIcnCss="--svicn-bg-img-prominent";n.UnsavedPromIcnCss="--unsvicn-bg-img-prominent";n.SavePromClrCss="#5087EC";n.SavePromTxtClrCss="#FFFFFF";n.FlyoutBGClrCss="--flyout-bg-clr";n.FlyoutLnkClrCss="--flyout-lnk-clr";n.FlyoutTxtClrCss="--flyout-txt-clr";n.UiErrorStates=["Ok","AddItem","RemoveItem","GetCollection","CreateCollection","Mismatch","Intermittent","BadItemData"];n.observerConfig={childList:!0,subtree:!0,attributes:!0}})(SvCtrlV2||(SvCtrlV2={})),function(n){function r(t){return t&&a(t,n.SavableEntityCN)}function w(n,t){return!n&&!t?"":n?t?"type=".concat(n,"&Comp=").concat(t):"type=".concat(n):"Comp=".concat(t)}function b(t,i){var r,u;return t?(r=i in n.TypeToAttributeMap?n.TypeToAttributeMap[i]:null,!r)?t:(u=i+":"+r+"=",(t.indexOf(u)!==0?u:"")+t):null}function s(n,t){return n?_qs("["+t+"]",n):null}function k(t){var u=s(n.containerElement,n.sourceAttribute+'*="'+t+'"'),i;if(!u)return null;for(i=u;!r(i)&&i[n.ParentElementAttr];)i=i[n.ParentElementAttr];return r(i)?i:u}function u(n,t){try{var i=_d.elementsFromPoint(n,t)||[];return Array.prototype.slice.call(i)}catch(r){return[]}}function d(n){var t,i;return n.thumbnailUrl||((i=(t=n.thumbnails)===null||t===void 0?void 0:t[0])===null||i===void 0?void 0:i.thumbnailUrl)}function f(n,t){for(var f,r,u=[],i=2;i<arguments.length;i++)u[i-2]=arguments[i];for(f=n&&n.length||0,r=0;r<f;r++)t(n[r],u)}function g(n){try{return JSON.parse(n)}catch(t){return null}}function e(n,t){if(n)for(var i in n)t(i,n[i])}function nt(n,t){var i=n;return e(t,function(n,t){i[n]=t}),i}function tt(n){if(n&&n.target){var t=n.target.getBoundingClientRect(),i=t.x,r=t.right,e=t.y,o=t.bottom,s=u((i+r)/2,(e+o)/2);f(s,function(n){n.tagName==="A"&&n.hasAttribute("h")&&_w.si_T&&_w.si_T(n.getAttribute("h"))})}}function it(t,i,r,u,f){n.standalone&&sj_evt.fire(n.scEngagementEN,t,i,r,u,f)}function t(t){n.hoverContainer&&t&&e(t,function(t,i){n.hoverContainer.style.setProperty(t,i)})}function rt(){n.hoverContainer&&t({display:"block"})}function ut(){n.hoverContainer&&(t({display:"none"}),sj_evt.fire("onHoverContainerHide"))}function ft(i){var u=i||n.currentHoveredItem.Element;if(n.hoverContainer&&u){n.setKeepFlyoutActive(!0);var e=_w.scrollX||_w.pageXOffset,s=_w.scrollY||_w.pageYOffset,r=o(u);if(!r){n.setKeepFlyoutActive(!1);return}var f=r.top,h=r.bottom,c=r.left,l=r.width,a=r.height,v=h>_w.innerHeight?_w.innerHeight-f:a;t({width:l+n.PixelUnit,height:v+n.PixelUnit,top:f+s+n.PixelUnit,left:c+e+n.PixelUnit});n.setKeepFlyoutActive(!1)}}function et(n,t){if(!(n&&t))return!1;try{return n.contains(t)}catch(i){return!1}}function o(n){if(!n)return null;try{return n.getBoundingClientRect()}catch(t){return null}}function ot(n,t){var i;if(!(n&&t))return!1;try{if(i=o(n),!i)return;var f=i.x,e=i.y,r=u(f,e);return(r===null||r===void 0?void 0:r.length)&&r.indexOf(t)>-1}catch(s){return!1}}function st(t){var i,r;if(!t||!n.localCollectionNames)return!1;i=t.toLowerCase();for(r in n.localCollectionNames)if(i==r.toLowerCase())return!0;return!1}function ht(n,t){var i,r;return!n||!t?null:Element.prototype.closest?n.closest(t):(i=Element.prototype.matches?Element.prototype.matches:Element.prototype.webkitMatchesSelector?Element.prototype.webkitMatchesSelector:Element.prototype.msMatchesSelector,!i)?null:(r=function(n,t){var r=n;do{if(i.call(r,t))return r;r=r.parentElement||r.parentNode}while(r&&r.nodeType===1);return null},r(n,t))}function h(n){return n&&n.tagName==="A"}function i(n,t,i){n&&t&&i&&n.addEventListener(t,i)}function c(n,t){i(n,"keydown",function(n){n.keyCode==13&&t(n)})}function ct(n,t,r,u){if(r===void 0&&(r=!0),u===void 0&&(u=!0),n&&t){var f=h(n)?t:function(n){u&&(sj_pd(n),n.stopImmediatePropagation());t(n)};i(n,"click",f);r&&c(n,f)}}function lt(t,i){t&&i&&l(t,n.FocusInEN,i)}function at(t,i){t&&i&&l(t,n.FocusOutEN,i)}function l(n,t,r){n&&r&&f(t,function(t){i(n,t,r)})}function a(t,i){if(!t||!i)return!1;var r=t[n.ClassListAttr];return r&&r.contains(i)}function v(t,i,r){t&&t[n.ClassListAttr]&&t[n.ClassListAttr][r](i)}function vt(n,t){v(n,t,"add")}function y(n,t){v(n,t,"remove")}function yt(t){t&&y(t,n.InProgressCN)}function pt(n,t,i){return(i===void 0&&(i=""),n&&n.children&&t)?n.querySelectorAll("."+t+i):[]}function wt(n,t){var r=this,i;return t===void 0&&(t=300),function(){for(var f=[],u=0;u<arguments.length;u++)f[u]=arguments[u];sb_ct(i);i=sb_st(function(){n.apply(r,f)},t)}}function bt(t){var i;if(!t)return"";if(t.turl)return t.turl;if(i=t.ThumbnailInfo,i&&i.length>=1){var r=i[0],u=r.Thumbnail,f=r.ThumbnailId,e=r.ExternalThumbnailUrl,o=(n.ctrl===null||n.ctrl===void 0?void 0:n.ctrl.dataset.bngd)!==n.UndefinedString?n.ctrl===null||n.ctrl===void 0?void 0:n.ctrl.dataset.bngd:"";return u?u:f?"".concat(o,"/th?id=").concat(f):e||""}return""}function p(n){if(!(n&&n.content&&n.itemType))return null;var t=n.content,i=n.itemType;switch(i){case"Image":return t.imageId;case"Video":return t.videoId;case"Generic":return t.contentId;default:return null}}function kt(t){if(!t)return null;var u=t&&t[n.CollectionItemIdAttr],i=u?decodeURIComponent(u):"",r=p(t);return r||(r=/^[a-z]+:[a-z]+=/.test(i)?i.substring(i.indexOf("=")+1):i.replace("/"+n.partnerKey+"/:","")),{contentId:r,collectionItemId:i}}n.isSavableEntity=r;n.getUrlParamsForTelemetry=w;n.getValidCid=b;n.getElementWithAttr=s;n.getElementFromMid=k;n.elementsFromPoint=u;n.getTbnlUrlFrmGetCollResp=d;n.iterateThroughList=f;n.parseJsonString=g;n.iterateOverObject=e;n.objectAssign=nt;n.fireOverlapping=tt;n.fireSCEngagementEvent=it;n.setHoverContainerStyle=t;n.showHoverContainer=rt;n.hideHoverContainer=ut;n.positionHoverContainer=ft;n.elementContains=et;n.getClientRect=o;n.isElementInSpaceOfAnother=ot;n.isCollectionExists=st;n.getClosest=ht;n.isAnchorElement=h;n.addListenerToElement=i;n.addEnterKeyListener=c;n.addClickListener=ct;n.addInListeners=lt;n.addOutListeners=at;n.elementHasClass=a;n.addElementClass=vt;n.removeElementClass=y;n.removeInProgress=yt;n.selectChildrenOfClass=pt;n.debounce=wt;n.getThumnailFromItemMD=bt;n.getContentId=p;n.getItemIds=kt}(SvCtrlV2||(SvCtrlV2={}));__assign=this&&this.__assign||function(){return __assign=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},__assign.apply(this,arguments)},function(n){function r(i,r,u,f){t.getSuggestedTitle(n.urlParams,i,r,"",u,f)}function u(i,r){typeof t.getCollections!==n.UndefinedString&&t.getCollections(n.urlParams,i,r)}function f(r,u,f,e){var h=1,c=n.currentHoveredItem.Element;if(c){var l=f in Constants.PredefinedCollections,a=l?Constants.PredefinedCollections[f]:null,o=__assign({},n.currentHoveredItem),s=o.Metadata;if(c.hasAttribute(n.SavesGenericItemDataAttr)&&typeof t.addEdgeGenericItem!==n.UndefinedString){t.addEdgeGenericItem(n.parseJsonString(c.getAttribute(n.SavesGenericItemDataAttr)),f,function(n){return r(n,o,!0,e,!1,f)},function(){return u(h,o.Element)},n.currentCompName);return}if(!s){u(7,o.Element);return}i(s,o.ItemType)&&typeof t.addGenericItem!==n.UndefinedString?t.addGenericItem(n.currentUrlParams,s,n.itemSchema,n.itemTagPath,l?a:null,n.localCollectionsMap[f],f,n.partnerKey,null,function(n){return r(n,o,!0,e,!1,f)},function(){return u(h,o.Element)}):typeof t.addNonGenericItem!==n.UndefinedString&&t.addNonGenericItem(n.currentUrlParams,s,o.ItemType,n.itemSchema,f,l?a:null,n.localCollectionsMap[f],function(n){return r(n,o,!1,e,!1,f)},function(){return u(h,o.Element)})}}function e(r,u,f,e){var h,c,o,s;if(e===void 0&&(e="Flyt"),h=1,c=n.currentHoveredItem.Element,c){if(o=__assign({},n.currentHoveredItem),s=o.Metadata,c.hasAttribute(n.SavesGenericItemDataAttr)&&typeof t.addEdgeGenericItemToNewColl!==n.UndefinedString){t.addEdgeGenericItemToNewColl(n.parseJsonString(c.getAttribute(n.SavesGenericItemDataAttr)),f,function(n){return r(n,o,!0,e,!0,"",f)},function(){return u(h,o.Element)},n.currentCompName);return}if(!s){u(7,o.Element);return}i(s,o.ItemType)&&typeof t.addGenericItem!==n.UndefinedString?t.addGenericItem(n.currentUrlParams,s,n.itemSchema,n.itemTagPath,null,f,null,n.partnerKey,n.collTagPath,function(n){return r(n,o,!0,e,!0,"",f)},function(){return u(h,o.Element)}):f&&typeof t.addNonGenericItem!==n.UndefinedString&&t.addNonGenericItem(n.currentUrlParams,s,o.ItemType,n.itemSchema,null,null,f,function(n){return r(n,o,!1,e,!0,"",f)},function(){return u(h,o.Element)})}}function o(r,u,f,e){var c=2,l=n.currentHoveredItem.Element,h;if(l){var o=__assign({},n.currentHoveredItem),a=o.Mid,s=n.localSavedItemsMap[a];s&&((l.hasAttribute(n.SavesGenericItemDataAttr)||i(o.Metadata,o.ItemType))&&typeof t.deleteGenericItem!==n.UndefinedString?t.deleteGenericItem(n.currentUrlParams,s.cid,n.kctColls[f]||f,function(n){return r(n,o,f,e)},function(){return u(c,o.Element)}):typeof t.deleteNonGenericItem!==n.UndefinedString&&(h=f in Constants.PredefinedCollections,t.deleteNonGenericItem(n.currentUrlParams,h?Constants.PredefinedCollections[f]:"",h?"":f,s.cid,o.ItemType,function(n){return r(n,o,f,e)},function(){return u(c,o.Element)})))}}function i(t,i){return(i===void 0&&(i=n.defaultItemType),!t)?!1:!("mid"in t)&&i!=="recipe"}var t=MySavesAPIUtils;n.getSuggestedTitles=r;n.getCollections=u;n.addToCollection=f;n.addToNewCollection=e;n.removeFromCollection=o}(SvCtrlV2||(SvCtrlV2={})),function(n){function r(t){if(n.itemSchema||(n.itemSchema={}),t&&t.length>0){var i=t.split(":"),r=i[0],u=i[1];n.itemSchema[r]=u}}function t(t){var i;if(!t)return null;if(i=t.dataset,i){var r=i.svptnk,u=i.svptnerinfo,f=i.svitminfp,e=i.svcptid,o=i.ufmc,s=i.sfmc,h=i.svstb,c=i.svmdcmp,l=i.svloc,a=i.svattr,v=i.persbtncls,y=i.cstmuiobj,p=n.parseJsonString(u)||{},w=n.parseJsonString(y)||{};return n.objectAssign(n.parseJsonString(f)||{},{PredefinedType:p,Key:r,ComponentId:e,UnsavedFormCode:o,SavedFormCode:s,SavedLinkSameTab:!!h,MetaLocInfo:{MetadataLocationId:l,MetadataLocationAttr:a,MetaLocCompName:c},PersButtonClassName:v,CustomUIObj:w})}}function u(){n.itemSchema=null;n.defaultItemType=null;n.partnerKey=null;n.defaultCollectionType=null;n.defOrCustCollName=null;n.collTagPath=null;n.itemTagPath=null;n.currentComponentId=null;n.sourceAttribute=null;n.apiItemType=null;n.savedFormCode=null;n.savedLinkSameTab=!1;n.urlParams=null;n.customUIObj=null}function i(t){if(t){u();var f=t.Mapping,e=t.SavedFormCode,o=t.SavedLinkSameTab,i=t.PredefinedType,s=i.Title,h=i.CollectionTagPath,c=i.PredefinedCollectionType,l=i.ItemType,a=i.APIItemType,v=t.Key,y=t.SourceAttr,p=t.ItemTagPath,w=t.ComponentId,k=t.PersButtonClassName,b=t.CustomUIObj;f&&n.iterateThroughList(f.split(","),r);l&&(n.defaultItemType=l);v&&(n.partnerKey=v);c&&(n.defaultCollectionType=c);s&&(n.defOrCustCollName=s);h&&(n.collTagPath=h);p&&(n.itemTagPath=p);w&&(n.currentComponentId=w);y&&(n.sourceAttribute=y);a&&(n.apiItemType=a);e&&(n.savedFormCode=e);o&&(n.savedLinkSameTab=o);n.apiItemType&&n.currentComponentId&&(n.urlParams=n.getUrlParamsForTelemetry(n.apiItemType,n.currentComponentId));b&&(n.customUIObj=b)}}function f(r,u){var e=r&&r.getAttribute(n.ComponentIdDataAttr),f;e&&!n.componentMap[e]&&(f=t(r),n.componentMap[e]=f,n.partnerCount++,n.partnerCount===1&&(n.partnerWithPersBtn=f,i(f)));u&&u(r)}function e(i,r){var f,e,u,o;i&&((f=i.getAttribute(n.ComponentIdDataAttr),(n.ctrl===null||n.ctrl===void 0?void 0:n.ctrl.dataset.bclist)&&(e=n.ctrl.dataset.bclist.toLowerCase().split(","),(e===null||e===void 0?void 0:e.indexOf(f===null||f===void 0?void 0:f.toLowerCase()))>-1))||(f&&!n.componentMap[f]&&(u=t(i),n.componentMap[f]=u,n.allSourceAttributes.push(u.SourceAttr),o=u.MetaLocInfo,o&&u.PersButtonClassName&&(n.partnerWithPersBtn=u,_d.getElementsByClassName(u.PersButtonClassName).length>0&&(n.componentMap[o.MetaLocCompName]=u,sj_evt.fire(n.PartnerRegisterEN,u)))),r&&r(i)))}n.componentMap={};n.partnerCount=0;n.allSourceAttributes=[];n.setCurrentPartnerInfo=i;n.registerPartnerAndComponent=f;n.registerPartner=e}(SvCtrlV2||(SvCtrlV2={}));__spreadArray=this&&this.__spreadArray||function(n,t,i){if(i||arguments.length===2)for(var r=0,f=t.length,u;r<f;r++)!u&&r in t||(u||(u=Array.prototype.slice.call(t,0,r)),u[r]=t[r]);return n.concat(u||Array.prototype.slice.call(t))},function(n){function d(){var i={ItmId:n.currentHoveredItem.Mid,CompName:n.currentCompName};t(r,a,i)}function g(){var i={CompName:n.currentCompName,HvrSrc:u};t(e,"",i)}function nt(n){var i={ColCount:n};t(f,l,i)}function tt(r,u){var f={ColId:u,CollName:n.localCollectionsMap[u],CompName:n.currentCompName,ClkSrc:y};t(i,"",f)}function it(){var r={CompName:n.currentCompName,ClkSrc:p};t(i,"",r)}function rt(r,u){var f={ColId:u,ColName:n.localCollectionsMap[u],CompName:n.currentCompName,ClkSrc:v};t(i,"",f)}function ut(){var r={CompName:n.currentCompName,Clksrc:w};t(i,"",r)}function ft(){var r={CompName:n.currentCompName,Clksrc:u};t(i,"",r)}function et(i,u,f,e,o){var s={ColId:o,ItmId:u,CompName:n.currentCompName,ClkSrc:f,IsNewCol:e?"1":"0"};t(r,h,s)}function ot(i,u,f,e){var o={ColId:u,ItmId:f,CompName:n.currentCompName,ClkSrc:e};t(r,c,o)}function st(i,r){var u={CompName:n.currentCompName,ErrorType:r};t(o,b,u)}function t(n,t,i){t===void 0&&(t="");i===void 0&&(i=null);var r=ct(i);ht.apply(void 0,__spreadArray([n,k,t],r,!1))}function ht(n){for(var i=[],t=1;t<arguments.length;t++)i[t-1]=arguments[t];typeof Log!="undefined"&&Log.Log&&Log.Log.apply(Log,__spreadArray([n,"",s,!1],i,!1))}function ct(t){var i=[];for(var r in t)i.push(r,t[r]);return i.map(function(t){return(t===null||t===void 0?void 0:t.toString)!=null?t.toString():n.UndefinedString})}var f="Saves",e="Hover",i="SaveClick",r="Success",o="SaveErr",s="SaveControl",h="Saved",c="Unsaved",l="GetCollections",a="ShowFlyout",v="LnkClk",y="ColLst",p="CrtNewBtn",w="ColExp",u="SvCtrlBtn",b="UIState",k="Txt";n.logFlyoutShown=d;n.logSvBtnHoverEvent=g;n.logGetCollectionsSucceeded=nt;n.logCollLstClick=tt;n.logCreateButtonClick=it;n.logLinkClick=rt;n.logCollExpandClick=ut;n.logSaveControlBtnClick=ft;n.logAddItemSucceeded=et;n.logDeleteItemSucceeded=ot;n.logErrorState=st}(SvCtrlV2||(SvCtrlV2={})),function(n){function ct(n){ft=n}function s(){return ft}function l(){n.removeElementClass(n.currentHoveredItem.Element,n.CurrentElementCN);n.currentHoveredItem.LatestCollId&&(sj_evt.fire(n.CurrentCollIdUnsetEN,n.currentHoveredItem.LatestCollId),n.currentHoveredItem.LatestCollId=null);n.currentHoveredItem.Element=null;n.currentHoveredItem.Turl=null;n.currentHoveredItem.Metadata=null;n.currentHoveredItem.Mid=null}function h(t,i){var r,u,e;if(!t)return null;if(r=null,!i&&f){for(u=0;u<n.allSourceAttributes.length;u++)if(r=t.hasAttribute(n.allSourceAttributes[u])?t:n.getElementWithAttr(t,n.allSourceAttributes[u]),r){i=n.allSourceAttributes[u];break}}else i||(i=n.sourceAttribute),r=t.hasAttribute(i)?t:n.getElementWithAttr(t,i);return!r||!i?null:(e=r.getAttribute(i),e)?n.parseJsonString(e):null}function lt(t){var u,i,r,f,e;if(t&&t.items){for(u=t.items,i=u.length-1;i>=0;i--)if(r=u[i],r&&r.content){if(f=r.content,!f)continue;if(e=n.getTbnlUrlFrmGetCollResp(f),e)return e}return null}}function it(n){if(n){var t=n.mid,i=n.sid;return t||i}}function ki(i,u,f){var e,o=n.currentHoveredItem.Element;if(o){if(n.logSaveControlBtnClick(o),sj_evt.fire("onSaveInProgress",o),i==n.CustomCollDummyId){n.addToNewCollection(dt,function(i,r){sj_evt.fire(n.RemoveCollFromList,n.CustomCollDummyId);t(i,r)},n.defOrCustCollName);return}((e=n.localSavedItemsMap[n.currentHoveredItem.Mid])===null||e===void 0?void 0:e.collections[n.latestCollId])?(r||f)&&n.removeFromCollection(kt,t,i,u):n.addToCollection(y,t,i,u)}}function di(i){var u=i.currentTarget,r=u.getAttribute(n.CollectionIdDataAttribute),f=u.getAttribute(n.KCTDataAttr);if(r||f)sj_sp(i),sj_pd(i),i.stopImmediatePropagation();else return!0;if(n.logCollLstClick(n.currentHoveredItem.Element,r),r==n.CustomCollDummyId){n.addToNewCollection(dt,function(i,r){sj_evt.fire(n.RemoveCollFromList,n.CustomCollDummyId);t(i,r)},n.defOrCustCollName,n.ColListName);return}u.hasAttribute(n.SavedDataAttr)?n.removeFromCollection(kt,t,r,n.ColListName):n.addToCollection(y,t,r,n.ColListName)}function at(){i&&i.broadcastMessage(i.BCActionMessage)}function gi(n,t){var i,r,u;if(!(t&&t.content&&n))return!1;i=t.content;switch(i._type){case"ImageObject":return i.imageId===n.MediaId;case"VideoObject":return i.videoId===n.MediaId;case"GenericItem":if(n.ItemTagPath!==i.itemTagPath)return!1;if("contentId"in i&&"ContentId"in n)return i.contentId===n.ContentId;if(n.ClickThroughUrl!==i.url)return!1;if("CustomData"in n&&"customData"in i)try{if(r=JSON.parse(n.CustomData),u=JSON.parse(i.customData),"MediaUrl"in r||"MediaUrl"in u)return r.MediaUrl===u.MediaUrl}catch(f){return!1}return!0}return!1}function vt(t){var i,r,u;for(i in n.localSavedItemsMap)if(r=n.localSavedItemsMap[i],r.rawItem&&(u=r.rawItem,gi(t,u)))return i;return null}function nr(){if(n.defaultCollectionType){var t=Constants.PredefinedCollections[n.defaultCollectionType];ni(t,n.defOrCustCollName)&&sj_evt.fire(n.RemoveCollFromList,t)}else sj_evt.fire(n.RemoveCollFromList,n.CustomCollDummyId)}function yt(){if(n.defaultCollectionType){var t=Constants.PredefinedCollections[n.defaultCollectionType];n.localCollectionsMap[t]||(p(t,n.defOrCustCollName),n.latestCollId||(n.latestCollId=t),sj_evt.fire(n.AddCollToListEN,!1,t,n.defOrCustCollName,null,n.defaultCollectionType))}!n.defaultCollectionType&&n.collTagPath&&n.defOrCustCollName&&!n.isCollectionExists(n.defOrCustCollName)&&(n.latestCollId=n.CustomCollDummyId,sj_evt.fire(n.AddCollToListEN,!1,n.CustomCollDummyId,n.defOrCustCollName))}function tr(t,i){if(!i){var r=n.getClosest(t,".".concat(n.SaveCtrlContainerCN));i=r.getAttribute(n.ComponentIdDataAttr)}i&&n.currentCompName!=i&&n.componentMap[i]&&(nr(),n.setCurrentPartnerInfo(n.componentMap[i]),yt())}function a(t,i,u,e){var l,c,s;if(f&&tr(t,e),!e&&!n.currentComponentId)return!1;n.addElementClass(t,n.CurrentElementCN);n.currentHoveredItem.Element=t;var o=h(t,i||n.sourceAttribute)||h(t,n.SavesGenericItemDataAttr),a=n.getElementWithAttr(t,n.ariaLabelAttr),v=a===null||a===void 0?void 0:a.ariaLabel,y=v&&v!=n.currentImgTitle&&st;return o&&(n.currentHoveredItem.Metadata=o,n.currentHoveredItem.Mid=it(o)||vt(o),n.currentHoveredItem.Turl=n.getThumnailFromItemMD(o),n.currentHoveredItem.ItemType=o.type||n.defaultItemType,c={},s=n.currentHoveredItem.Mid,s?((n.localSavedItemsMap===null||n.localSavedItemsMap===void 0?void 0:n.localSavedItemsMap[s])?(n.currentHoveredItem.LatestCollId=n.localSavedItemsMap[s].lastCollection,n.currentHoveredItem.LatestCollId&&sj_evt.fire(n.CurrentCollIdSetEN,n.currentHoveredItem.LatestCollId),c=n.localSavedItemsMap[s].collections,(!r||((l=n.localSavedItemsMap[s])===null||l===void 0?void 0:l.collections[n.latestCollId]))&&(n.addElementClass(t,n.SavedCN),n.addElementClass(n.hoverContainerSub,n.SavedCN))):n.removeElementClass(n.hoverContainerSub,n.SavedCN),y||sj_evt.fire(n.HoverElementSetEN,c)):(n.removeElementClass(n.hoverContainerSub,n.SavedCN),n.removeElementClass(t,n.SavedCN),sj_evt.fire(n.HoverElementSetEN,c)),y&&ir(v)),n.currentUrlParams=u||n.urlParams,n.currentCompName=e||n.currentComponentId,!0}function ir(t){var i,r,u;sj_evt.fire(n.LoadingSuggestedCollection);n.currentImgTitle=t;var f=[],e=Object.keys(n.localCollectionsMap),o=function(t,i){var r,u;n.currentImgTitle==i&&(n.latestCollId=((u=(r=t===null||t===void 0?void 0:t.RawResponse)===null||r===void 0?void 0:r.suggestedCollections)===null||u===void 0?void 0:u.length)>0?t.RawResponse.suggestedCollections[0].id:n.noSuggestedCollId,sj_evt.fire(n.CurrentCollIdSetEN,n.latestCollId,!1))};for(i=0,r=e;i<r.length;i++)u=r[i],f.push({collectionId:u,collectionTitle:n.localCollectionsMap[u]});n.getSuggestedTitles(f,t,function(n){o(n,t)},function(){sj_evt.fire(n.CurrentCollIdSetEN,n.latestCollId,!1)})}function v(t,i,u,f,e,o){var s;if(t&&i){if(!(i in n.localSavedItemsMap)){n.elementHasClass(t,n.SavedCN)&&n.removeElementClass(t,n.SavedCN);return}(!r||((s=n.localSavedItemsMap[n.currentHoveredItem.Mid])===null||s===void 0?void 0:s.collections[n.latestCollId]))&&n.addElementClass(t,n.SavedCN);u&&(t&&sj_evt.fire("Saved",t),n.logAddItemSucceeded(t,i,f,e,o))}}function rt(t,i,u,f,e){var o;t&&i&&(i in n.localSavedItemsMap&&(!r||((o=n.localSavedItemsMap[i])===null||o===void 0?void 0:o.collections[n.latestCollId]))||n.removeElementClass(t,n.SavedCN),u&&(t&&sj_evt.fire("Unsaved",t),n.logDeleteItemSucceeded(t,e||d,i,f)))}function pt(t,i,r,u,f){var e,o;t&&(t in n.localSavedItemsMap?(u&&n.localSavedItemsMap[t].lastCollection||(n.localSavedItemsMap[t].lastCollection=r),n.localSavedItemsMap[t].collections[r]||(n.localSavedItemsMap[t].collections[r]=!0,n.localSavedItemsMap[t].numCollections++),u?n.localSavedItemsMap[t].collectionQueue.unshift(r):n.localSavedItemsMap[t].collectionQueue.push(r)):(o={cid:i,rawItem:f?f:null,collections:(e={},e[r]=!0,e),lastCollection:r,collectionQueue:[r],numCollections:1},n.localSavedItemsMap[t]=o))}function wt(t,i){if(t&&n.localSavedItemsMap[t])if(d=i,n.localSavedItemsMap[t].numCollections===1)delete n.localSavedItemsMap[t],n.currentHoveredItem.Mid===t&&(n.currentHoveredItem.LatestCollId=null);else{delete n.localSavedItemsMap[t].collections[i];n.localSavedItemsMap[t].numCollections--;var r=n.localSavedItemsMap[t].collectionQueue.indexOf(i);r>-1&&(n.localSavedItemsMap[t].collectionQueue.splice(r,1),n.localSavedItemsMap[t].lastCollection=n.localSavedItemsMap[t].collectionQueue.slice(-1)[0],n.currentHoveredItem.Mid===t&&(n.currentHoveredItem.LatestCollId=n.localSavedItemsMap[t].lastCollection))}}function bt(t,i,r,u){n.localCollectionsCidMap[t]||(n.localCollectionsCidMap[t]=[]);n.localCollectionsCidMap[t].indexOf(i)<=-1&&(u?n.localCollectionsCidMap[t].push(i):n.localCollectionsCidMap[t].unshift(i));n.cidToThumbnailUrlMap[i]||(n.cidToThumbnailUrlMap[i]=r)}function rr(t,i){var r,u;if(n.localCollectionsCidMap[t])return(u=n.localCollectionsCidMap[t].indexOf(i),u<=-1)?void 0:(n.localCollectionsCidMap[t].splice(u,1),((r=n.localCollectionsCidMap[t])===null||r===void 0?void 0:r[0])||null)}function ur(t,i){var r,u;return t?(r=n.parseJsonString(t.getAttribute(n.SavesGenericItemDataAttr)),r||(r=h(t,n.sourceAttribute)),!r)?null:(u={url:r.ClickThroughUrl,customData:r.CustomData,domain:r.FriendlyDomainName,itemTagPath:r.ItemTagPath,title:r.Title,_type:"GenericItem",contentId:r.ContentId},{collectionItemId:i,content:u,itemtype:"Generic"}):null}function y(t,i,u,f,e,o,s){var h,c;return(o&&o!=""||(o=(c=(h=t.targetCollectionOperationStatus)===null||h===void 0?void 0:h.collection)===null||c===void 0?void 0:c.id),!(t&&t[n.IsSuccessAttr])||!o)?!1:(r||(n.latestCollId=o,i.LatestCollId=o),n.noSuggestedCollId=o,sj_evt.fire(n.CurrentCollIdSetEN,o),e&&s&&(p(o,s),sj_evt.fire(n.AddCollToListEN,!0,o,s,n.currentHoveredItem.Turl,null,!0)),at(),fr(i,t,u,f,o,e))}function kt(t,i,u,f){if(!(t&&t[n.IsSuccessAttr]))return!1;r||(n.latestCollId=u,i.LatestCollId=u);sj_evt.fire(n.CurrentCollIdUnsetEN,u);var e=n.localSavedItemsMap[i===null||i===void 0?void 0:i.Mid];return at(),er(i,t,f,(e===null||e===void 0?void 0:e.cid)||null,u)}function dt(t,i,r,u,f,e,o){return t&&t[n.IsSuccessAttr]&&sj_evt.fire(n.RemoveCollFromList,n.CustomCollDummyId),y(t,i,r,u,f,e,o)}function fr(t,i,u,f,e,o){var y=i.targetCollectionOperationStatus,p,h,s,w,b;if(!(y&&y[n.IsSuccessAttr]))return!1;try{var k=y,d=k.itemOperationStatuses,nt=n.CollectionAttr,a=k[nt];if(!(d&&a&&a.id))return!1;var tt=d,g=tt[0],it=n.IsSuccessAttr,rt=g[it],ut=n.CollectionItemIdAttr,c=g.item[ut];if(!rt)return!1;p=e in Constants.PredefinedCollections;h=p?e:a.id;r||(n.latestCollId=h);p&&(n.kctColls[e]=a.id);s=t.Mid;s||c===null||(w=c.substring(c.indexOf(":")+1),s=w,n.currentHoveredItem.Element==t.Element&&(n.currentHoveredItem.Mid=w));b=u?c:n.getValidCid(c,t.ItemType);bt(h,b,n.currentHoveredItem.Turl,!1);n.localCollectionsMap[h]&&sj_evt.fire(n.ChangeCollThumbnail,h,n.currentHoveredItem.Turl);var ft=s?n.localSavedItemsMap[s]:!1,l=t.Element,et=u?ur(l,c):null;return(pt(s,b,h,!1,et),n.localSavedItemsMap[s]&&n.fireSCEngagementEvent(1,0,o?1:0,n.localSavedItemsMap[s].numCollections),l)?(v(l,s,!0,f,o,h),sj_evt.fire(n.UpdateHoverBoxEN,h,n.localCollectionsMap[h],s&&n.localSavedItemsMap[s].numCollections||1),n.isSavableEntity(l)||v(n.getElementFromMid(s),s,!1),gt(n.SaveAddEN,i,s,l,!ft)):!1}catch(ot){return!1}}function er(t,i,r,u,f){var e=t.Mid,o=t.Element,h,s;return(i.collectionId=f,wt(e,f),n.fireSCEngagementEvent(0,1,0,n.localSavedItemsMap[e]?n.localSavedItemsMap[e].numCollections:0),o)?(rt(o,e,!0,r,f),h=rr(f,u),sj_evt.fire(n.ChangeCollThumbnail,f,h?n.cidToThumbnailUrlMap[h]:null),s=!n.localSavedItemsMap[e],s&&!n.isSavableEntity(o)&&rt(n.getElementFromMid(e),e,!1),sj_evt.fire(n.UpdateHoverBoxEN,f,n.localCollectionsMap[f],s?0:n.localSavedItemsMap[e].numCollections),gt(n.SaveDelEN,i,e,o,s)):!1}function gt(t,i,u,f,e){var o;if(f){if(n.removeInProgress(f),(n.currentHoveredItem===null||n.currentHoveredItem===void 0?void 0:n.currentHoveredItem.Element)===f){n.removeElementClass(n.ctrl,n.GetErrCN);switch(t){case n.SaveAddEN:(!r||((o=n.localSavedItemsMap[n.currentHoveredItem.Mid])===null||o===void 0?void 0:o.collections[n.latestCollId]))&&n.addElementClass(n.hoverContainerSub,n.SavedCN);break;case n.SaveDelEN:e&&n.removeElementClass(n.hoverContainerSub,n.SavedCN)}n.removeInProgress(n.hoverContainerSub)}sj_evt.fire(t,i,u,f,e,typeof n.metaLocElement!==n.UndefinedString&&n.metaLocElement===f)}return d=null,!0}function t(t,i){t===3?(n.addElementClass(n.ctrl,n.GetErrCN),g=!1):(n.removeElementClass(i,n.InProgressCN),n.addElementClass(i,n.FlyoutErrorCN));sj_evt.fire(n.SaveControlErrorEN,t)}function p(t,i){n.localCollectionsMap[t]=i;n.localCollectionNames[i]=1}function ni(t,i){var r;return((r=n.localCollectionsCidMap[t])===null||r===void 0?void 0:r.length)>0?!1:n.localCollectionsMap[t]&&n.localCollectionNames[i]?(delete n.localCollectionsMap[t],delete n.localCollectionNames[i],!0):!1}function or(t){if(!(t.length<=0)){var r=t.sort(function(n,t){return n.dateModified>t.dateModified?-1:1}),i=r[0];n.latestCollId=!i.knownCollectionType?i.id:Constants.PredefinedCollections[i.knownCollectionType];n.noSuggestedCollId=!i.knownCollectionType?i.id:Constants.PredefinedCollections[i.knownCollectionType]}}function sr(t,i){var e=i[0],u,f;if(t){var o=n.getItemIds(t),r=o.collectionItemId,s=o.contentId;s&&r&&(u=t.itemType==="Generic",f=u?r:n.getValidCid(r,t.itemType),t.content&&bt(e,f,n.getTbnlUrlFrmGetCollResp(t.content),!0),pt(s,f,e,!0,u?t:null))}}function hr(t){var u,e;if(t){var r=t.collectionPage,f=t.id,i=t.knownCollectionType;(i&&(n.kctColls[Constants.PredefinedCollections[i]]=f),u=!i?f:Constants.PredefinedCollections[i],n.localCollectionsMap[u]||gr(t),r&&r.items)&&(e=r.items,n.iterateThroughList(e,sr,u))}}function ti(t){var i,r;return(t&&t.collections)?(i=t.collections,i=i.reverse(),r=(i===null||i===void 0?void 0:i.length)||0,n.logGetCollectionsSucceeded(r),n.iterateThroughList(i,hr),or(i),sj_evt.fire("onSaveGet",t),yt(),n.partnerWithPersBtn&&sj_evt.fire(n.PartnerRegisterEN,n.partnerWithPersBtn),sj_evt.fire("onCollectionsGotten"),!0):!1}function cr(n){ht=new Date;nt===!1&&(nt=!0,setTimeout(function(){return ii(n)},tt))}function ii(t){var u=new Date,i,r;u.getTime()-ht.getTime()<tt?setTimeout(function(){return ii(t)},tt):(nt=!1,i=_qs("."+n.partnerWithPersBtn.PersButtonClassName,_d.body),(t===null||t===void 0?void 0:t.type)==="resize"&&i&&n.elementHasClass(n.hoverContainerSub,n.PersBtnHoveredCN)?(r=n.getClientRect(i),n.setHoverContainerStyle({top:r.top+n.PixelUnit,left:r.left+n.PixelUnit})):n.positionHoverContainer())}function lr(){if(!s()){var t=ri(null);if(t){if(l(),!a(t)){l();return}n.hoverContainer&&(n.positionHoverContainer(),n.showHoverContainer(),n.removeElementClass(n.hoverContainerSub,n.PersBtnHoveredCN),n.iterateThroughList(n.RemovableCN,function(t){var i=n.currentHoveredItem.Element;i&&n.hoverContainerSub&&(n.elementHasClass(i,t)?n.addElementClass(n.hoverContainerSub,t):n.removeElementClass(n.hoverContainerSub,t))}));sj_evt.fire(n.ControlAppendedEN)}}}function ar(t){if(!s()){var i=t[n.RelatedTargetAttr];if(i||n.hideHoverContainer(),i&&n.hoverContainer){if(n.elementContains(n.ctrl,i))return;n.isElementInSpaceOfAnother(i,n.hoverContainer)||n.hideHoverContainer()}}}function ri(n){b&&sb_ct(b);var t=et;return et=n,n&&(b=sb_st(lr,bi*2)),t}function vr(t){if(!s()){var i=t[n.CurrentTargetAttr];n.currentFocusTarget=t.target;i&&n.isSavableEntity(i)?ri(i):sj_pd(t)}}function yr(t){var i,r,f,u,e;if(!s()){if(i=t[n.CurrentTargetAttr],r=t[n.RelatedTargetAttr],!r){if(f=t[n.TargetAttr],t.type!=="mouseleave"&&n.elementContains(i,f))return;n.hideHoverContainer();return}if(!n.elementContains(n.ctrl,r)&&n.isSavableEntity(i)&&!n.elementContains(i,r)){for(u=r;!n.isSavableEntity(u)&&u[n.ParentElementAttr];)u=u[n.ParentElementAttr];if(e=n.isSavableEntity(u),t.type==="focusout"&&!n.elementContains(i,r)&&!n.shiftKeyDown&&n.tabKeyDown&&e){n.nextFocusable=r;n.ctrlBtn.focus();sj_evt.fire(n.SaveButtonFocusEN);n.tabKeyDown=!1;return}n.hoverContainer&&n.hideHoverContainer();n.iterateThroughList(n.RemovableCN,function(t){n.removeElementClass(n.hoverContainerSub,t)});n.iterateThroughList([n.HoverCN,n.FocusCN,n.SaveCtrlHoveredCN,n.CurrentElementCN],function(t){n.removeElementClass(i,t)});n.currentHoveredItem.Element===i&&(l(),n.currentFocusTarget==null)}}}function ui(t){t&&(n.addInListeners(t,vr),n.addOutListeners(t,yr),n.isSavableEntity(t)&&fi(t))}function c(t){if(t){if(n.ctrl===null||n.ctrl===void 0?void 0:n.ctrl.dataset.bclist){var i=n.ctrl.dataset.bclist.toLowerCase().split(",");if((i===null||i===void 0?void 0:i.indexOf(n.currentComponentId===null||n.currentComponentId===void 0?void 0:n.currentComponentId.toLowerCase()))>-1)return}n.isSavableEntity(t)?ui(t):n.iterateThroughList(n.selectChildrenOfClass(t,n.SavableEntityCN),ui)}}function fi(n){if(n){var t=h(n);t&&v(n,it(t)||vt(t))}}function pr(t){var i=t;i&&(i.type==="attributes"&&i.target&&n.iterateThroughList(n.selectChildrenOfClass(i.target,n.SavableEntityCN),function(n){c(n);fi(n)}),n.ctrl&&i.addedNodes&&i.addedNodes.length>0&&n.iterateThroughList(i.addedNodes,c))}function ei(t){for(var i=t,u={scroll:1,overlay:1,auto:1},r;i&&i.parentElement&&i!==(_d===null||_d===void 0?void 0:_d.body);){if(i.hasAttribute(n.ScrollBindDataAttr))break;r=_w===null||_w===void 0?void 0:_w.getComputedStyle(i);(r.overflow in u||r.overflowX in u||r.overflowY in u)&&(n.addListenerToElement(i,"scroll",function(){n.positionHoverContainer()}),i.setAttribute(n.ScrollBindDataAttr,"1"));i=i.parentElement}}function wr(t){e.observe(t,n.observerConfig);n.ctrl&&c(t)}function oi(t){t&&(n.registerPartner(t,wr),ei(t))}function ut(t){return ti(t)?(n.iterateThroughList(o,oi),u&&(a(u),u=null),!0):!1}function w(t){n.registerPartnerAndComponent(t,br);(n.ctrl===null||n.ctrl===void 0?void 0:n.ctrl.dataset.cstmui)&&tu();ei(t)}function br(i){n.partnerCount!==1||g?(e.observe(i,n.observerConfig),n.ctrl&&c(i)):(n.containerElement=i,n.getCollections(function(n){return kr(n,i)},function(){return t(3,null)}),g=!0)}function kr(t,i){var r=ti(t);return u&&(a(u),u=null),e.observe(i,n.observerConfig),n.ctrl&&c(i),r}function si(t){var r,i,u,e;if(t&&(n.elementHasClass(t,n.SaveCtrlContainerCN)?t.dataset.svcptid&&(f?oi(t):w(t)):n.partnerWithPersBtn&&n.elementHasClass(t,n.partnerWithPersBtn.PersButtonClassName)&&sj_evt.fire(n.PartnerRegisterEN,n.partnerWithPersBtn),r=t.children,r))for(i=0,u=r;i<u.length;i++)e=u[i],si(e)}function dr(t){var i=t;i&&(i.addedNodes&&i.addedNodes.length>0&&n.iterateThroughList(i.addedNodes,si),i.removedNodes&&i.removedNodes.length>0&&n.iterateThroughList(i.removedNodes,function(t){n.partnerWithPersBtn&&n.elementHasClass(t,n.partnerWithPersBtn.PersButtonClassName)&&sj_evt.fire(n.DeregisterPersBtnEN)}),i.attributeName&&i.target&&n.partnerWithPersBtn&&n.elementHasClass(i.target,n.partnerWithPersBtn.PersButtonClassName)&&sj_evt.fire(n.PartnerRegisterEN,n.partnerWithPersBtn))}function hi(t){return new MutationObserver(function(i){return n.iterateThroughList(i,t)})}function ci(t){var i=t[1],r=t[2],f,u;i&&r&&(f=r&&n.getValidCid(r,n.defaultItemType),f)&&(u=n.getElementFromMid(i),u&&v(u,i,!1))}function li(t){var i=t[1],u=t[2],r;i&&(r=n.getElementFromMid(i),wt(i,u),r&&rt(r,i,!1))}function gr(t,i){var f,r;i===void 0&&(i=!1);var h=t.id,e=t.title,o=t.collectionPage,s=t.knownCollectionType,u=s?Constants.PredefinedCollections[s]:h;!n.localCollectionsMap[u]&&e&&(p(u,e),r=null,o&&((f=o.items)===null||f===void 0?void 0:f.length)&&(r=lt(o),r&&sj_evt.fire(n.ChangeCollThumbnail,u,r)),sj_evt.fire(n.AddCollToListEN,i,u,e,r,s||null))}function ai(){(n.flyoutContainer===null||n.flyoutContainer===void 0?void 0:n.flyoutContainer.dataset.ebc)&&typeof CollChannel.CollectionsBroadcastChannel!==n.UndefinedString&&(i=new CollChannel.CollectionsBroadcastChannel(iu,null,null,!1),i===null||i===void 0?void 0:i.initialize())}function vi(t){var i=t[1],r=t[2],u=t[3],f=t[4],e=t[5];a(r,u,f,e);n.positionHoverContainer(i);n.showHoverContainer();n.addElementClass(n.hoverContainerSub,n.PersBtnHoveredCN);sj_evt.fire(n.ControlAppendedEN)}function nu(){var t=_d.querySelector(":root"),i,r;t&&(t.style.setProperty(n.IcnsBGColorCss,n.SavePromClrCss),t.style.setProperty(n.IcnLblTxtClrCss,n.SavePromTxtClrCss),i=getComputedStyle(t).getPropertyValue(n.SavedPromIcnCss),t.style.setProperty(n.SavedIcnCss,i),r=getComputedStyle(t).getPropertyValue(n.UnsavedPromIcnCss),t.style.setProperty(n.UnsavedIcnCss,r))}function tu(){n.customUIObj&&n.flyoutContainer&&(n.customUIObj.BGColor&&n.flyoutContainer.style.setProperty(n.FlyoutBGClrCss,n.customUIObj.BGColor),n.customUIObj.TextColor&&n.flyoutContainer.style.setProperty(n.FlyoutTxtClrCss,n.customUIObj.TextColor),n.customUIObj.LinkColor&&n.flyoutContainer.style.setProperty(n.FlyoutLnkClrCss,n.customUIObj.LinkColor))}function iu(){return}function yi(i){var r=i[1];f?n.getCollections(ut,function(){return t(3,null)}):n.iterateThroughList(o,w);u=r}function pi(){f?n.getCollections(ut,function(){return t(3,null)}):n.iterateThroughList(o,w);n.partnerWithPersBtn&&sj_evt.fire(n.PartnerRegisterEN,n.partnerWithPersBtn)}function wi(){sj_evt.unbind(n.FavAddEN,ci);sj_evt.unbind(n.FavDeleteEN,li);sj_evt.unbind("ajax.unload",wi);sj_evt.unbind(n.PersButtonInteractEN,vi);sj_evt.unbind(n.CollBCLoadedEN,ai);sj_evt.unbind(n.CurrentElementSetEN,yi);sj_evt.unbind(n.UpdateSaveStateEN,pi);_d.body.removeChild(n.hoverContainer);k.disconnect();e.disconnect();i===null||i===void 0?void 0:i.close()}function ru(){sj_evt.bind(n.FavDeleteEN,li);sj_evt.bind(n.FavAddEN,ci);sj_evt.bind(n.PersButtonInteractEN,vi);sj_evt.bind("ajax.unload",wi);sj_evt.bind(n.CurrentElementSetEN,yi,!0);sj_evt.bind(n.UpdateSaveStateEN,pi,!0);sj_evt.bind(n.CollBCLoadedEN,ai,!0)}function uu(){n.localSavedItemsMap={};n.localCollectionsMap={};n.localCollectionsCidMap={};n.cidToThumbnailUrlMap={};n.localCollectionNames={};n.latestCollId=null;n.partners=[];n.currentHoveredItem={Element:null,LatestCollId:null,Metadata:null,Mid:null,Turl:null}}function fu(){var i,u;n.ctrl=_ge("svctrl");n.ctrl&&(ct(!1),n.addListenerToElement(n.ctrl,"mousedown",sj_sp));n.ctrlBtn=_ge("svctrlbtn");n.hoverContainer=_ge("svhvr");n.hoverContainerSub=_ge("svhvrsub");n.hoverContainer&&(_d.body.insertBefore(n.hoverContainer,_d.body.firstChild),n.addOutListeners(n.hoverContainer,ar));uu();e=hi(pr);k=hi(dr);k.observe(_d.body,n.observerConfig);n.flyoutContainer=_ge("svflytc");n.flyoutContainer&&n.flyoutContainer.hasAttribute("data-svlne")&&(n.standalone=!!n.flyoutContainer.getAttribute("data-svlne"));o=n.selectChildrenOfClass(_d.body,n.SaveCtrlContainerCN);f=(n.ctrl===null||n.ctrl===void 0?void 0:n.ctrl.dataset.mulcomp)?!0:!1;n.standalone||(f?n.getCollections(ut,function(){return t(3,null)}):n.iterateThroughList(o,w));ru();n.addListenerToElement(_w,n.ScrollEvent,n.positionHoverContainer);n.addListenerToElement(_w,n.ResizeEvent,cr);ot=n.debounce(function(){n.tabKeyDown=!1},1e3);_w.addEventListener("keydown",function(t){!n.shiftKeyDown&&t.shiftKey?n.shiftKeyDown=!0:n.tabKeyDown||t.key!="Tab"||(n.tabKeyDown=!0)});_w.addEventListener("keyup",function(t){!t.shiftKey&&n.shiftKeyDown?n.shiftKeyDown=!1:n.tabKeyDown&&t.key=="Tab"&&ot()});(n.ctrl===null||n.ctrl===void 0?void 0:n.ctrl.dataset.isprom)&&nu();r=(i=n.ctrl===null||n.ctrl===void 0?void 0:n.ctrl.dataset)===null||i===void 0?void 0:i.svctrlv3;st=(u=n.ctrl===null||n.ctrl===void 0?void 0:n.ctrl.dataset)===null||u===void 0?void 0:u.svctrlv3dynsug}n.containerElement=null;n.shiftKeyDown=!1;n.tabKeyDown=!1;n.kctColls={};var ft,u=null,b,k,e,d,et,bi=0,i,g=!1,ot=null,r=null,st=null,o,f=!1,ht,nt=!1,tt=500;n.setKeepFlyoutActive=ct;n.getKeepFlyoutActive=s;n.clearCurrentHoveredItem=l;n.metadataFromElement=h;n.getThumbnailUrlFromCollectionPage=lt;n.getMetadataId=it;n.handleSaveClick=ki;n.collectionPickerItemListener=di;n.addItemSuccessCB=y;n.handleError=t;n.addCollectionName=p;n.removeCollectionName=ni;fu()}(SvCtrlV2||(SvCtrlV2={})),function(n){function dt(t){if(i){t||(t=n.currentHoveredItem.Mid);var u=t&&n.localSavedItemsMap[t],e=r||!u,f=e?n.latestCollId:u.lastCollection,o=f&&n.localCollectionsMap[f]||n.defOrCustCollName;vt(f,o,u?u.numCollections:0)}}function at(t,i){if(t&&ht!==t){n.removeElementClass(ht,"b_sclbl");n.addElementClass(t,"b_sclbl");ht=t;n.removeElementClass(bt,n.SublabelActiveCN);var r=t.querySelector(i?"onsvd":"onusvd");n.addElementClass(r,n.SublabelActiveCN);bt=r}}function li(t){sj_sp(t);var i=t.target.value.trim(),r=n.isCollectionExists(i);b.setAttribute("aria-disabled",i&&!r?"false":"true");r?n.addElementClass(l,n.ErrDispCN):n.elementHasClass(l,n.ErrDispCN)&&n.removeElementClass(l,n.ErrDispCN)}function gt(t){var i,r=t[1],u=n.currentHoveredItem.Mid;vt(r,n.localCollectionsMap[r],u&&((i=n.localSavedItemsMap[u])===null||i===void 0?void 0:i.numCollections));lt=!1}function ai(t){var i=t[1],r;i==5?(n.removeElementClass(et,n.ErrStateInvisibleCN),n.addElementClass(et,n.ErrStateVisibleCN)):nt&&(o.textContent=nt[i],n.removeElementClass(o,n.ErrStateInvisibleCN),n.addElementClass(o,n.ErrStateVisibleCN));n.logErrorState(n.currentHoveredItem.Element,n.UiErrorStates[i]);r=n.currentHoveredItem.Mid;n.fireSCEngagementEvent(0,0,0,r&&n.localSavedItemsMap[r]?n.localSavedItemsMap[r].numCollections:0,n.UiErrorStates[i]);p(e)}function vi(t){var i,u,h=t[0],o=t[1],s=t[2],f=t[3],e=n.currentHoveredItem.Mid;f!==0&&(!r||((i=n.localSavedItemsMap[e])===null||i===void 0?void 0:i.collections[n.latestCollId]))?(!r||r&&((u=n.localSavedItemsMap[e])===null||u===void 0?void 0:u.collections[n.latestCollId]))&&n.addElementClass(n.hoverContainerSub,n.SavedCN):n.removeElementClass(n.hoverContainerSub,n.SavedCN);vt(o,s,f)}function yi(){var h;if(n.ctrl&&(h=n.ctrl.dataset,h)){var y=h.dly,tt=h.sfmc,p=h.svctrlv3,w=h.svctrlv3dynsug;y&&(ct=parseInt(y,10));n.savedFormCode||(n.savedFormCode=tt);p&&(r=p);w&&(kt=w)}c=_ge("svctrlinlineform");ut=_ge("svctrlnewint");b=_ge("svctrlinlineformcreate");a=_ge("svctrlhvr");t||(t=_ge("svflytc"));i=_ge("svctrllnk");g=_ge("sccolltxt");wt=i.getAttribute("href");st=_ge("svctrlhvrnum");e=_ge("svctrlerr");o=_ge("svctrlerrtxt");u=_ge("svctrlhvrbtn");ft=_ge("svctrllstw");k=_ge("svctrlhvrpnl");et=_ge("svctrlmsmtcherrtxt");d=_ge("svctrlmsmtchlnk");v=_ge("svctrlhvrpnlbtn");l=_ge("svctrlinlineformerrdup");ot=_ge("svctrlinlineformback");c&&(f=_ge("svctrlinlineformname"),n.addClickListener(ot,ii),n.addClickListener(b,ui),f&&(n.addEnterKeyListener(f,ui),n.addListenerToElement(f,"keyup",li)));i&&n.isAnchorElement(i)&&n.addClickListener(i,ci);d&&n.isAnchorElement(d)&&n.addClickListener(d,ci);t&&(n.standalone||n.addOutListeners(t,tr),r||(n.addInListeners(n.ctrlBtn,rr),n.addOutListeners(n.ctrlBtn,ur)),a&&n.addClickListener(u,nr),n.addClickListener(_ge("svctrltri"),fr,!1),t.hasAttribute(n.SaveErrorMapAttr)&&(nt=n.parseJsonString(t.getAttribute(n.SaveErrorMapAttr))));sj_evt.bind(n.ControlAppendedEN,er);sj_evt.bind("onSaveInProgress",di);sj_evt.bind(n.SaveAddEN,bi);sj_evt.bind(n.SaveDelEN,ki);sj_evt.bind("onHoverContainerHide",it);sj_evt.bind(n.CurrentCollIdSetEN,gt);sj_evt.bind(n.UpdateHoverBoxEN,vi);sj_evt.bind(n.SaveButtonClickEN,s);sj_evt.bind(n.LoadingSuggestedCollection,or);n.standalone||sj_evt.bind(n.CollListExpandEN,oi);sj_evt.bind(n.SaveControlErrorEN,ai);n.standalone&&(sj_evt.bind(n.CollectionsGottenEN,wi),sj_evt.bind(n.HostSavesControlClickedEN,pi));sj_evt.bind(n.SaveButtonFocusEN,gi)}function pi(t){var i=t[0],r=t[1];i==n.HostSavesControlClickedEN&&(s(),yt(r))}function wi(t){var i=t[0];i==n.CollectionsGottenEN&&h!=e&&(gt([null,n.currentHoveredItem.LatestCollId||n.latestCollId]),p(a),si())}function ni(t){var i;dt(t);(!r||n.isCreateDialogShowing)&&s();ri((i=n.localSavedItemsMap[t])===null||i===void 0?void 0:i.numCollections)}function bi(t){var i,u=t[3];n.currentHoveredItem.Element===u&&(ni(n.currentHoveredItem.Mid),(!r||((i=n.localSavedItemsMap[n.currentHoveredItem.Mid])===null||i===void 0?void 0:i.collections[n.latestCollId]))&&n.addElementClass(n.hoverContainerSub,n.SavedCN))}function ki(t){var i=t[3],r=t[4];n.currentHoveredItem.Element===i&&(ni(n.currentHoveredItem.Mid),r&&n.removeElementClass(n.hoverContainerSub,n.SavedCN))}function ti(){n.removeElementClass(e.querySelector("."+n.SublabelActiveCN),n.SublabelActiveCN)}function di(t){var i=t[1],r=t[2];n.standalone||(ti(),n.currentHoveredItem.Element===i&&at(_ge("svctrlhvrpnling"),r))}function gi(){t&&s()}function ii(){u&&c&&(n.removeElementClass(k,n.DeactivateCN),n.removeElementClass(ft,n.DeactivateCN),n.removeElementClass(c,n.FlyoutActiveCN),n.removeElementClass(u,n.DeactivateCN),n.addElementClass(u,n.FlyoutActiveCN),n.setKeepFlyoutActive(!1),f.value="",f.disabled=!0,u.setAttribute("tabindex","0"),i.setAttribute("tabindex","0"),v&&v.setAttribute("tabindex","0"),n.collectionList&&n.collectionList.setAttribute("tabindex","0"),n.isCreateDialogShowing=!1)}function nr(){u&&c&&(n.addElementClass(k,n.DeactivateCN),n.addElementClass(ft,n.DeactivateCN),n.addElementClass(u,n.DeactivateCN),n.addElementClass(c,n.FlyoutActiveCN),n.removeElementClass(u,n.FlyoutActiveCN),n.setKeepFlyoutActive(!0),f.value="",f.disabled=!1,f.focus(),n.removeElementClass(l,n.ErrDispCN),b.setAttribute("aria-disabled","true"),u.setAttribute("tabindex","-1"),i.setAttribute("tabindex","-1"),v&&v.setAttribute("tabindex","-1"),n.collectionList&&n.collectionList.setAttribute("tabindex","-1"),n.isCreateDialogShowing=!0)}function ri(n){if(st&&n!==undefined&&n!==null){var t=n-1;r||(st.textContent=t>0?"+"+t:"")}}function vt(u,f,e){var s,h=n.standalone&&((s=t===null||t===void 0?void 0:t.dataset)===null||s===void 0?void 0:s.htc)&&(!e||e==0),o;(h?(i.textContent=t.dataset.htc,rt=""):(i.textContent=f,rt=u,r&&g&&(!lt||!kt)&&(g.textContent=f)),n.isAnchorElement(i))&&(o=wt,n.savedFormCode&&(o+="&FORM="+n.savedFormCode),h||(o+="&collId="+u),i.setAttribute("href",o),n.savedLinkSameTab&&i.hasAttribute(n.TargetAttr)?i.removeAttribute(n.TargetAttr):i.setAttribute(n.TargetAttr,"_blank"),ri(e))}function ui(){var i,t;if(n.logCreateButtonClick(n.currentHoveredItem.Element),t=(i=f.value)===null||i===void 0?void 0:i.trim(),t){if(n.isCollectionExists(t)){n.addElementClass(l,n.ErrDispCN);return}p(ut);n.addToNewCollection(n.addItemSuccessCB,n.handleError,t)}}function fi(t){n.nextFocusable.focus();n.nextFocusable=null;sj_pd(t)}function tr(i){var r,u;if(!n.getKeepFlyoutActive()){if(r=i[n.RelatedTargetAttr],i.type==="focusout"&&!n.elementContains(t,r)&&n.nextFocusable){u=+n.ctrl.dataset.nfdly||0;u>0?sb_st(function(){return fi(i)},u):fi(i);return}if(r){if(n.isElementInSpaceOfAnother(t,r))return;if(n.elementContains(n.ctrl,r))return;if(n.isElementInSpaceOfAnother(n.ctrl,r))return}i[n.TargetAttr]!==ot&&(it(),n.clearCurrentHoveredItem())}}function ei(){y&&(sb_ct(y),y=null)}function oi(){var i,u,v,h,c,l,y,e;if(t&&(n.removeElementClass(n.ctrl,n.NarrowImageCN),t.style.removeProperty("left"),t.style.removeProperty("right"),t.style.removeProperty("bottom"),n.removeElementClass(n.ctrl,n.NarrowImageRightCN),n.removeElementClass(n.ctrl,n.NarrowImageBottomCN),i=n.getClientRect(t),i)){var f=Math.min(n.getClientRect(_d.body).width,_w.innerWidth),a=i.width,o=i.right,s=i.left;if(s<0?o+a>f?(n.addElementClass(n.ctrl,n.NarrowImageCN),u=(o-f)/2,s+u<=0&&(u-=tt),t.style.right=u+"px"):n.addElementClass(n.ctrl,n.NarrowImageRightCN):o>f&&(s<a?(n.addElementClass(n.ctrl,n.NarrowImageCN),u=s/2,o-u>=f&&(u+=tt),t.style.left=-1*u+"px"):n.elementHasClass(n.hoverContainerSub,n.PersBtnHoveredCN)?i&&i.right>f?(v=f-i.right,t.style.left=v-tt+"px"):n.addElementClass(n.ctrl,n.NarrowImageRightCN):n.addElementClass(n.ctrl,n.NarrowImageRightCN)),h=n.ctrl===null||n.ctrl===void 0?void 0:n.ctrl.dataset.flyoutpos,c=h?3:1,i=n.getClientRect(t),l=Math.min(n.getClientRect(_d.body).height,_w.innerHeight)-i.bottom,y=k.clientHeight+Math.min(3.5,Object.keys(n.localCollectionsMap).length)*48,l<t.clientHeight/c||l<y/c)if(n.addElementClass(n.ctrl,n.NarrowImageBottomCN),h){var b=n.getClientRect(n.ctrlBtn),d=n.getClientRect(n.currentHoveredItem.Element),g=_qs(".svbtnlbl",n.ctrlBtn);i=n.getClientRect(t);g&&(e=n.getClientRect(g),b.left-d.left<d.right-b.right?i.left-e.right<0&&e.right-i.right<0&&(t.style.bottom=n.ctrlBtn.clientHeight+"px"):i.left-e.left<0&&e.left-i.right<0&&(t.style.bottom=n.ctrlBtn.clientHeight+"px"))}else{var p=n.ctrlBtn.clientLeft,nt=n.ctrlBtn.clientWidth,w=t.clientLeft,it=t.clientWidth;p>=w&&p+nt<=w+it&&(t.style.bottom=(r?n.ctrl.clientHeight+tt:n.ctrlBtn.clientHeight)+"px")}}}function ir(){p(a);at(_ge("svctrlhvrpnltxt"),!0)}function si(){t&&(n.addElementClass(n.ctrl,n.HasFlyoutCN),ti(),n.standalone||oi(),pt&&n.standalone||(n.logFlyoutShown(n.currentHoveredItem.Element),pt=!0),sj_evt.fire("onResetScroll"),w=!0,ei())}function it(){t&&(n.removeElementClass(n.ctrl,n.HasFlyoutCN),p(),ei(),w=!1)}function s(){ir();w||si()}function hi(){s();sj_evt.fire("prismFocusChange",n.currentHoveredItem.Element)}function rr(i){i.relatedTarget&&(n.getKeepFlyoutActive()||(sj_pd(i),sj_sp(i),n.addElementClass(n.ctrl,n.HasFlyoutCN),n.logSvBtnHoverEvent(),n.hoverContainerSub&&n.addElementClass(n.hoverContainerSub,"b_schvr"),sj_evt.fire("onSaveHover"),t&&(ct&&!y?y=sb_st(hi,ct):hi())))}function ur(t){if(t.type==="focusout"){if(n.shiftKeyDown){n.currentFocusTarget&&n.currentFocusTarget.focus();t.stopImmediatePropagation();sj_sp(t);sj_pd(t);return}s();n.elementHasClass(e,n.FlyoutActiveCN)?n.nextFocusable.focus():h.focus();return}if(!n.getKeepFlyoutActive()){var i=t.relatedTarget;if(i){if(n.elementContains(n.ctrl,i))return;if(n.isElementInSpaceOfAnother(n.hoverContainer,i))return}n.clearCurrentHoveredItem();t.type==="mouseleave"&&(n.removeElementClass(n.ctrl,n.HasFlyoutCN),it())}}function fr(t){var i=n.elementsFromPoint(t.clientX,t.clientY);i&&i.length>1&&i[1].click()}function ci(t){var i=t[n.TargetAttr];si_ct(i,!1,t);n.logLinkClick(n.currentHoveredItem.Element,rt);n.standalone&&(sj_evt.fire("onNewTabOpenRequest",i.getAttribute("href")),t.preventDefault());sj_sp(t)}function p(t){var f,i,r,s;if(h&&(n.removeElementClass(h,n.FlyoutActiveCN),f=t==ut,n.setKeepFlyoutActive(f),n.getKeepFlyoutActive()?n.addElementClass(n.ctrl,"b_scnapd"):n.removeElementClass(n.ctrl,"b_scnapd")),!t){h=null;sj_evt.fire(n.VisualStateChangedEN,1);return}n.elementHasClass(n.ctrl,"b_geterr")&&(o.textContent=nt[3],n.removeElementClass(o,n.ErrStateInvisibleCN),n.addElementClass(o,n.ErrStateVisibleCN),t=e);n.addElementClass(t,n.FlyoutActiveCN);t==a&&(n.addElementClass(u,n.FlyoutActiveCN),ii());h=t;i=null;switch(t){case a:r=_ge("svctrlpckr");r?(s=r.getAttribute("aria-expanded")==="false",i=s?3:4):i=3;break;case e:i=5}sj_evt.fire(n.VisualStateChangedEN,i)}function er(){i&&(dt(),sj_evt.fire(n.VisualStateChangedEN,2))}function yt(t){var i=n.localSavedItemsMap[n.currentHoveredItem.Mid];i&&i.numCollections>1&&!r?sj_evt.fire(n.ChevronToggleCollListEN):n.handleSaveClick(r?n.latestCollId:n.currentHoveredItem.LatestCollId||n.latestCollId,"Btn",t)}function or(){g.textContent=". . .";lt=!0}function sr(){w?it():s()}function hr(){yt(!0);at(_ge("svctrlhvrpnltxt"),!0)}var pt=!1,rt,w=!1,h,u,c,f,b,ut,e,o,l,ft,k,et,d,v,ot,t,a,g,i,wt,st,ht,bt,ct=0,y,nt,r=null,kt=null,lt=!1,tt=5;n.isCreateDialogShowing=!1;n.onSaveControlClicked=yt;n.toggleFlyout=sr;n.onSaveControlIcnClicked=hr;yi()}(SvCtrlV2||(SvCtrlV2={})),function(n){function c(){s.scrollTop=0}function l(n){var t=n;if(/\/th(\/.*|)\?/i.test(n)){var i=n.split("?"),r=i[0],u=i[1];t=r+"?"+u.replace(/&?\b[whrc]=\d+/gi,"")+y}return t}function p(t){var u=t[1],r=t[2],i=_qs("["+n.CollectionIdDataAttribute+'="'+u+'"] img',n.collectionList);i&&(r?i.src=l(r):i.removeAttribute("src"))}function r(t,i,r){r===void 0&&(r=!1);var u=r?function(n){t.insertBefore(n,t.firstChild)}:function(n){t.appendChild(n)};n.iterateThroughList(i,u)}function i(t,i){var r=function(n,i){i&&t.setAttribute(n,i)};n.iterateOverObject(i,r)}function u(n,t){return sj_ce(n,null,t)}function w(t){var i,r=t[1],u;if(r&&n.collectionList&&!(((i=n.localCollectionsCidMap[r])===null||i===void 0?void 0:i.length)>0)&&(u=_qs("[".concat(n.CollectionIdDataAttribute,'="').concat(r,'"]'),n.collectionList),u)){n.collectionList.removeChild(u);return}}function b(t){var f,y=t[1],p=t[2],w=t[3],v=t[4],b=t[5],k=t[6],h,e,c,a,s;n.collectionList&&(h=u("div","b_svcimg"),e=sj_ce("img"),i(e,{role:"presentation"}),sj_be(e,"error",function(){e.removeAttribute("src")}),v&&(e.src=l(v)),r(h,[e]),c=u("div","b_svclnk"),a=u("p","b_ignbt"),a.textContent=w,r(c,[a]),s=u("li","b_svcitm"),i(s,(f={},f[n.CollectionIdDataAttribute]=p||null,f[n.KCTDataAttr]=b||null,f.tabindex="-1",f.role="option",f["aria-selected"]="false",f)),k&&o(s),r(s,[h,c]),r(n.collectionList,[s],y),n.addClickListener(s,n.collectionPickerItemListener,!0,!1))}function e(r){var u,e;c();u=!1;r===null||r===undefined?(e=f.getAttribute("aria-expanded"),e!=="false"||h||(n.logCollExpandClick(n.currentHoveredItem.Element),h=!0),u=e==="true"?!1:!0):u=r;i(f,{"aria-expanded":u?"true":"false"});u?n.addElementClass(t,"xpnd"):n.removeElementClass(t,"xpnd");u&&sj_evt.fire(n.CollListExpandEN);n.standalone&&sj_evt.fire(n.VisualStateChangedEN,u?4:3)}function a(t){return _qs("["+n.CollectionIdDataAttribute+"='"+t+"']",n.collectionList)}function o(t){var r;i(t,(r={},r[n.SavedDataAttr]="1",r["aria-selected"]="true",r))}function v(t){var r;t.removeAttribute(n.SavedDataAttr);i(t,(r={},r["aria-selected"]="false",r))}function k(n){var r=n[1],i=n[2],u=i===void 0?!0:i,t;u&&(t=a(r),t&&o(t))}function d(n){var i=n[1],t=a(i);t&&v(t)}function g(t){var i=t[1];n.iterateThroughList(Array.prototype.slice.call(n.collectionList.childNodes),function(t){i&&t.getAttribute(n.CollectionIdDataAttribute)in i?o(t):v(t)})}function nt(t){var i;n.isCreateDialogShowing||(t.keyCode===38?(_d.activeElement.previousElementSibling&&_d.activeElement.previousElementSibling.focus(),sj_sp(t),sj_pd(t)):t.keyCode===40&&(_d.activeElement===n.collectionList?(i=_qs(".b_svcitm"))===null||i===void 0?void 0:i.focus():_d.activeElement.nextElementSibling&&_d.activeElement.nextElementSibling.focus(),sj_sp(t),sj_pd(t)))}function tt(){n.collectionList=_ge("svctrllst");f=_ge("svctrlpckr");s=_ge("svctrllstw");t=_ge("svctrlhvrpnlbtn");t&&n.addClickListener(t,function(){return e()});sj_evt.bind(n.AddCollToListEN,b,!0);sj_evt.bind(n.RemoveCollFromList,w,!0);sj_evt.bind(n.CurrentCollIdSetEN,k);sj_evt.bind(n.CurrentCollIdUnsetEN,d);sj_evt.bind(n.ChangeCollThumbnail,p);sj_evt.bind("onResetScroll",c);sj_evt.bind(n.HoverElementSetEN,g);sj_evt.bind(n.ChevronToggleCollListEN,function(){return e(!0)});sj_evt.bind(n.ControlAppendedEN,function(){return e(!1)});sj_evt.bind("onSaveHover",function(){t||sj_evt.fire(n.CollListExpandEN)});n.collectionList&&n.addListenerToElement(n.collectionList,"keydown",nt)}var f,s,t,h=!1,y="&w=40&h=40&c=7&r=0";tt()}(SvCtrlV2||(SvCtrlV2={})),function(n){function t(t){n.fireOverlapping(t);sj_sp(t);var i=n.ctrl===null||n.ctrl===void 0?void 0:n.ctrl.dataset.svicnclkb;if(sj_evt.fire(n.SaveButtonClickEN),sj_evt.fire(n.ChevronToggleCollListEN),i==="OpenSave"||i==="OpenSaveRemove")n.onSaveControlClicked(i==="OpenSave"?!1:!0)}function i(){n.ctrlBtn&&n.addClickListener(n.ctrlBtn,t,!0)}i()}(SvCtrlV2||(SvCtrlV2={}))